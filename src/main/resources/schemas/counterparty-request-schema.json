{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "title": "Counterparty Request Schema",
  "description": "Schema for validating counterparty creation requests",
  "required": [
    "clientId",
    "partyType",
    "partyName",
    "partyAccount",
    "partyAddress",
    "agent",
    "createdBy",
    "approvedBy"
  ],
  "properties": {
    "messageId": {
      "type": "string",
      "maxLength": 50
    },
    "traceabilityId": {
      "type": "string",
      "maxLength": 50
    },
    "clientId": {
      "type": "string",
      "minLength": 1,
      "maxLength": 140,
      "pattern": "^[a-zA-Z0-9_-]+$"
    },
    "alternatePartyId": {
      "type": "string",
      "maxLength": 140
    },
    "partyType": {
      "type": "string",
      "minLength": 1,
      "maxLength": 15,
      "enum": ["Debtor", "Creditor", "Agent", "Intermediary"]
    },
    "partyName": {
      "type": "string",
      "minLength": 1,
      "maxLength": 140
    },
    "partyNickName": {
      "type": "string",
      "maxLength": 140
    },
    "partyOrganizationId": {
      "type": "string",
      "maxLength": 35
    },
    "partyPrivateId": {
      "type": "string",
      "maxLength": 35
    },
    "partyAccount": {
      "type": "object",
      "required": ["currency"],
      "properties": {
        "iban": {
          "type": "string",
          "maxLength": 30,
          "pattern": "^[A-Z]{2}[0-9]{2}[A-Z0-9]+$"
        },
        "otherId": {
          "type": "string",
          "maxLength": 34
        },
        "currency": {
          "type": "string",
          "minLength": 3,
          "maxLength": 3,
          "pattern": "^[A-Z]{3}$"
        }
      },
      "additionalProperties": false
    },
    "partyAddress": {
      "type": "object",
      "required": [
        "streetName",
        "buildingNumber",
        "subdivision",
        "country"
      ],
      "properties": {
        "department": {
          "type": "string",
          "maxLength": 70
        },
        "subDepartment": {
          "type": "string",
          "maxLength": 70
        },
        "streetName": {
          "type": "string",
          "minLength": 1,
          "maxLength": 70
        },
        "buildingNumber": {
          "type": "string",
          "minLength": 1,
          "maxLength": 16
        },
        "buildingName": {
          "type": "string",
          "maxLength": 35
        },
        "floor": {
          "type": "string",
          "maxLength": 70
        },
        "townLocationName": {
          "type": "string",
          "maxLength": 35
        },
        "districtName": {
          "type": "string",
          "maxLength": 35
        },
        "subdivision": {
          "type": "string",
          "minLength": 1,
          "maxLength": 35
        },
        "country": {
          "type": "string",
          "minLength": 2,
          "maxLength": 2,
          "pattern": "^[A-Z]{2}$"
        },
        "email": {
          "type": "string",
          "maxLength": 2048,
          "format": "email"
        }
      },
      "additionalProperties": false
    },
    "agent": {
      "type": "object",
      "required": ["agentName", "address"],
      "properties": {
        "agentName": {
          "type": "string",
          "minLength": 1,
          "maxLength": 140
        },
        "identification": {
          "type": "object",
          "properties": {
            "clearingSystemMemberCode": {
              "type": "string",
              "maxLength": 15
            },
            "clearingSystemMemberId": {
              "type": "string",
              "maxLength": 35
            },
            "bic": {
              "type": "string",
              "maxLength": 11,
              "pattern": "^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$"
            }
          },
          "additionalProperties": false
        },
        "address": {
          "type": "object",
          "required": ["subdivision", "country"],
          "properties": {
            "department": {
              "type": "string",
              "maxLength": 70
            },
            "subDepartment": {
              "type": "string",
              "maxLength": 70
            },
            "streetName": {
              "type": "string",
              "maxLength": 70
            },
            "buildingNumber": {
              "type": "string",
              "maxLength": 16
            },
            "buildingName": {
              "type": "string",
              "maxLength": 35
            },
            "floor": {
              "type": "string",
              "maxLength": 70
            },
            "postBox": {
              "type": "string",
              "maxLength": 16
            },
            "room": {
              "type": "string",
              "maxLength": 70
            },
            "postalCode": {
              "type": "string",
              "maxLength": 16
            },
            "townName": {
              "type": "string",
              "maxLength": 35
            },
            "townLocationName": {
              "type": "string",
              "maxLength": 35
            },
            "districtName": {
              "type": "string",
              "maxLength": 35
            },
            "subdivision": {
              "type": "string",
              "minLength": 1,
              "maxLength": 35
            },
            "country": {
              "type": "string",
              "minLength": 2,
              "maxLength": 2,
              "pattern": "^[A-Z]{2}$"
            },
            "email": {
              "type": "string",
              "maxLength": 2048,
              "format": "email"
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "createdBy": {
      "type": "string",
      "minLength": 1,
      "maxLength": 140
    },
    "approvedBy": {
      "type": "string",
      "minLength": 1,
      "maxLength": 140
    }
  },
  "additionalProperties": false
}
